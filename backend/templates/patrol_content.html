<!-- patrol_content.html -->
<h2 class="text-xl font-semibold mb-2">Patrol Schedule</h2>
<div class="grid grid-cols-1 lg:grid-cols-2 gap-10">
  <!-- Left Panel -->
  <div id="patrol-container"><!-- Added id for patrol.js -->
    <h1 class="text-2xl font-semibold mb-4">
    </h1>
    
    <ul id="schedule-list" class="space-y-2 mb-4">
      <!-- Leave blank. This is handled by patrol.js-->
    </ul>

    <!-- Time slots management (from Zeitplan) -->
    <div class="mt-6 bg-gray-800 p-4 rounded">
      <div class="flex items-center justify-between mb-3">
        <div class="flex items-center gap-2">
          <button id="refresh" class="bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded">Aktualisieren</button>
          <span id="loading" class="text-gray-400"></span>
        </div>
        <div id="message" class="text-sm text-gray-300"></div>
      </div>

      <div class="overflow-auto">
        <table class="w-full text-sm text-left text-gray-300">
          <thead class="text-xs text-gray-400 uppercase border-b border-gray-700">
            <tr>
              <th class="py-2 px-2">ID</th>
              <th class="py-2 px-2">Start (HH:MM)</th>
              <th class="py-2 px-2">Ende (HH:MM)</th>
              <th class="py-2 px-2">Aktion</th>
            </tr>
          </thead>
          <tbody id="slotsTableBody">
            <tr><td colspan="4" class="py-4 px-2 text-gray-400">Keine Daten geladen</td></tr>
          </tbody>
          <tfoot class="border-t border-gray-700">
            <tr>
              <td class="py-2 px-2">Neu</td>
              <td class="py-2 px-2"><input id="newStart" type="time" value="08:00" class="bg-gray-700 text-white rounded px-2 py-1"></td>
              <td class="py-2 px-2"><input id="newEnd" type="time" value="20:00" class="bg-gray-700 text-white rounded px-2 py-1"></td>
              <td class="py-2 px-2"><button id="addSlot" class="bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded">Hinzufügen</button></td>
            </tr>
          </tfoot>
        </table>
      </div>
    </div>
  </div>

  <!-- Right Panel -->
  <div>
    <div class="mb-6">
      <h2 class="text-xl font-semibold mb-2">Patrol Schedule</h2>
      <div class="grid grid-cols-2 gap-4 text-sm text-gray-300">
        <!-- Calendar Month -->
        <div>
          <div class="flex items-center justify-between mb-2">
            <button id="prevMonth" class="text-xl">‹</button>
            <span id="monthLabel" class="font-semibold"></span>
            <button id="nextMonth" class="text-xl">›</button>
          </div>
          <div id="calendar" class="grid grid-cols-7 gap-2 text-center text-gray-400"></div>
        </div>
        <div id="nextMonthCalendar"></div>
      </div>
    </div>

    <div>
      <h2 class="text-xl font-semibold mb-2">Route Preview</h2>
      <div class="w-full h-[350px] bg-gray-700 rounded overflow-hidden">
        <div id="mapLoc" class="rounded w-full h-full"></div>
      </div>
    </div>
  </div>
</div>
<!-- Ensure patrol script runs when content is injected -->
<script src="{{ url_for('static', filename='patrol.js') }}"></script>
